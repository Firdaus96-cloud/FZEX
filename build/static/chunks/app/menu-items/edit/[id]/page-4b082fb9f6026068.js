(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[394],{9320:function(e,t,n){Promise.resolve().then(n.bind(n,803))},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"redirect")&&n.d(t,{redirect:function(){return s.redirect}}),n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}})},803:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var s=n(7437),r=n(4514),i=n(2919);n(1540);var a=n(6114),l=n(2546),o=n(8497),c=n(7138),u=n(6463),d=n(2265),m=n(8726);function h(){let{id:e}=(0,u.useParams)(),[t,n]=(0,d.useState)(null),[h,x]=(0,d.useState)(!1),{loading:f,data:p}=(0,o.U)();async function j(t,n){t.preventDefault(),n={...n,_id:e};let s=new Promise(async(e,t)=>{(await fetch("/api/menu-items",{method:"PUT",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})).ok?e():t()});await m.ZP.promise(s,{loading:"Saving this tasty item",success:"Saved",error:"Error"}),x(!0)}async function v(){let t=new Promise(async(t,n)=>{(await fetch("/api/menu-items?_id="+e,{method:"DELETE"})).ok?t():n()});await m.ZP.promise(t,{loading:"Deleting...",success:"Deleted",error:"Error"}),x(!0)}return((0,d.useEffect)(()=>{fetch("/api/menu-items").then(t=>{t.json().then(t=>{n(t.find(t=>t._id===e))})})},[]),h)?(0,u.redirect)("/menu-items"):f?"Loading user info...":p.admin?(0,s.jsxs)("section",{className:"mt-8",children:[(0,s.jsx)(l.Z,{isAdmin:!0}),(0,s.jsx)("div",{className:"max-w-2xl mx-auto mt-8",children:(0,s.jsxs)(c.default,{href:"/menu-items",className:"button",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("span",{children:"Show all menu items"})]})}),(0,s.jsx)(a.Z,{menuItem:t,onSubmit:j}),(0,s.jsx)("div",{className:"max-w-md mx-auto mt-2",children:(0,s.jsx)("div",{className:"max-w-xs ml-auto pl-4",children:(0,s.jsx)(r.Z,{label:"Delete this menu item",onDelete:v})})})]}):"Not an admin."}},4514:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7437),r=n(2265);function i(e){let{label:t,onDelete:n}=e,[i,a]=(0,r.useState)(!1);return i?(0,s.jsx)("div",{className:"fixed bg-black/80 inset-0 flex items-center h-full justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,s.jsx)("div",{children:"Are you sure you want to delete?"}),(0,s.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>a(!1),children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{n(),a(!1)},type:"button",className:"primary",children:"Yes,\xa0delete!"})]})]})}):(0,s.jsx)("button",{type:"button",onClick:()=>a(!0),children:t})}},8497:function(e,t,n){"use strict";n.d(t,{U:function(){return r}});var s=n(2265);function r(){let[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{r(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),r(!1)})})},[]),{loading:n,data:e}}},2919:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},3550:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})})}},1540:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(7437),r=n(6648),i=n(8726);function a(e){let{link:t,setLink:n}=e;async function a(e){let t=e.target.files;if((null==t?void 0:t.length)===1){let e=new FormData;e.set("file",t[0]);let s=fetch("/api/upload",{method:"POST",body:e}).then(e=>{if(console.log(e.json()),e.ok)return e.json().then(e=>{n(e)});throw Error("Something went wrong")});await i.ZP.promise(s,{loading:"Uploading...",success:"Upload complete",error:"Upload error"})}}return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(r.default,{className:"rounded-lg w-full h-full mb-1",src:t,width:250,height:250,alt:"avatar"}),!t&&(0,s.jsx)("div",{className:"text-center bg-gray-200 p-4 text-gray-500 rounded-lg mb-1",children:"No image"}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"file",className:"hidden",onChange:a}),(0,s.jsx)("span",{className:"block border border-gray-300 rounded-lg p-2 text-center cursor-pointer",children:"Change image"})]})]})}},6114:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(7437);function r(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}var i=n(3550),a=n(1540);function l(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 8.25l-7.5 7.5-7.5-7.5"})})}function o(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 15.75l7.5-7.5 7.5 7.5"})})}var c=n(2265);function u(e){let{name:t,addLabel:n,props:a,setProps:u}=e,[d,m]=(0,c.useState)(!1);function h(e,t,n){let s=e.target.value;u(e=>{let r=[...e];return r[t][n]=s,r})}return(0,s.jsxs)("div",{className:"bg-gray-200 p-2 rounded-md mb-2",children:[(0,s.jsxs)("button",{onClick:()=>m(e=>!e),className:"inline-flex p-1 border-0 justify-start",type:"button",children:[d&&(0,s.jsx)(o,{}),!d&&(0,s.jsx)(l,{}),(0,s.jsx)("span",{children:t}),(0,s.jsxs)("span",{children:["(",null==a?void 0:a.length,")"]})]}),(0,s.jsxs)("div",{className:d?"block":"hidden",children:[(null==a?void 0:a.length)>0&&a.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-end gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Name"}),(0,s.jsx)("input",{type:"text",placeholder:"Size name",value:e.name,onChange:e=>h(e,t,"name")})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Extra price"}),(0,s.jsx)("input",{type:"text",placeholder:"Extra price",value:e.price,onChange:e=>h(e,t,"price")})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"button",onClick:()=>{u(e=>e.filter((e,n)=>n!==t))},className:"bg-white mb-2 px-2",children:(0,s.jsx)(i.Z,{})})})]},t)),(0,s.jsxs)("button",{type:"button",onClick:function(){u(e=>[...e,{name:"",price:0}])},className:"bg-white items-center",children:[(0,s.jsx)(r,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:n})]})]})]})}function d(e){let{onSubmit:t,menuItem:n}=e,[r,i]=(0,c.useState)((null==n?void 0:n.image)||""),[l,o]=(0,c.useState)((null==n?void 0:n.name)||""),[d,m]=(0,c.useState)((null==n?void 0:n.description)||""),[h,x]=(0,c.useState)((null==n?void 0:n.basePrice)||""),[f,p]=(0,c.useState)((null==n?void 0:n.sizes)||[]),[j,v]=(0,c.useState)((null==n?void 0:n.category)||""),[g,w]=(0,c.useState)([]),[b,N]=(0,c.useState)((null==n?void 0:n.extraIngredientPrices)||[]);return(0,c.useEffect)(()=>{fetch("/api/categories").then(e=>{e.json().then(e=>{w(e)})})},[]),(0,s.jsx)("form",{onSubmit:e=>t(e,{image:r,name:l,description:d,basePrice:h,sizes:f,extraIngredientPrices:b,category:j}),className:"mt-8 max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"md:grid items-start gap-4",style:{gridTemplateColumns:".3fr .7fr"},children:[(0,s.jsx)("div",{children:(0,s.jsx)(a.Z,{link:r,setLink:i})}),(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsx)("label",{children:"Item name"}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>o(e.target.value)}),(0,s.jsx)("label",{children:"Description"}),(0,s.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value)}),(0,s.jsx)("label",{children:"Category"}),(0,s.jsx)("select",{value:j,onChange:e=>v(e.target.value),children:(null==g?void 0:g.length)>0&&g.map(e=>(0,s.jsx)("option",{value:e._id,children:e.name},e._id))}),(0,s.jsx)("label",{children:"Base price"}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>x(e.target.value)}),(0,s.jsx)(u,{name:"Sizes",addLabel:"Add item size",props:f,setProps:p}),(0,s.jsx)(u,{name:"Extra ingredients",addLabel:"Add ingredients prices",props:b,setProps:N}),(0,s.jsx)("button",{type:"submit",children:"Save"})]})]})})}},2546:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(7437),r=n(7138),i=n(6463);function a(e){let{isAdmin:t}=e,n=(0,i.usePathname)();return(0,s.jsxs)("div",{className:"flex mx-auto gap-2 tabs justify-center flex-wrap",children:[(0,s.jsx)(r.default,{className:"/profile"===n?"active":"",href:"/profile",children:"Profile"}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.default,{href:"/categories",className:"/categories"===n?"active":"",children:"Categories"}),(0,s.jsx)(r.default,{href:"/menu-items",className:n.includes("menu-items")?"active":"",children:"Menu Items"}),(0,s.jsx)(r.default,{className:n.includes("/users")?"active":"",href:"/users",children:"Users"})]}),(0,s.jsx)(r.default,{className:"/orders"===n?"active":"",href:"/orders",children:"Orders"})]})}}},function(e){e.O(0,[138,648,726,971,23,744],function(){return e(e.s=9320)}),_N_E=e.O()}]);