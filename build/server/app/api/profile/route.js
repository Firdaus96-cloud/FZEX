"use strict";(()=>{var e={};e.id=442,e.ids=[442],e.modules={67096:e=>{e.exports=require("bcrypt")},38013:e=>{e.exports=require("mongodb")},11185:e=>{e.exports=require("mongoose")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},59796:e=>{e.exports=require("zlib")},72818:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>O,requestAsyncStorage:()=>y,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v});var n={};t.r(n),t.d(n,{GET:()=>x,PUT:()=>m});var s=t(49303),i=t(88716),a=t(60670),o=t(68266),p=t(6590),l=t(49636),u=t(11185),c=t.n(u),d=t(75571);async function m(e){c().connect(process.env.MONGO_URL);let{_id:r,name:t,image:n,...s}=await e.json(),i={};i=r?{_id:r}:{email:(await (0,d.getServerSession)(o.L)).user.email};let a=await p.n.findOne(i);return await p.n.updateOne(i,{name:t,image:n}),await l.a.findOneAndUpdate({email:a.email},s,{upsert:!0}),Response.json(!0)}async function x(e){c().connect(process.env.MONGO_URL);let r=new URL(e.url).searchParams.get("_id"),t={};if(r)t={_id:r};else{let e=await (0,d.getServerSession)(o.L),r=e?.user?.email;if(!r)return Response.json({});t={email:r}}let n=await p.n.findOne(t).lean(),s=await l.a.findOne({email:n.email}).lean();return Response.json({...n,...s})}let g=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/profile/route",pathname:"/api/profile",filename:"route",bundlePath:"app/api/profile/route"},resolvedPagePath:"/home/uumparcelcentre.com.my/firdausfauzi/src/app/api/profile/route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:y,staticGenerationAsyncStorage:v,serverHooks:f}=g,q="/api/profile/route";function O(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}},68266:(e,r,t)=>{let n;t.d(r,{L:()=>d});let{MongoClient:s}=t(38013);if(!process.env.MONGO_URL)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');n=new s(process.env.MONGO_URL,{}).connect();var i=t(6590),a=t(53797),o=t(77234),p=t(64704),l=t(67096),u=t.n(l),c=t(11185);let d={secret:process.env.SECRET,adapter:(0,p.dJ)(n),providers:[(0,o.Z)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET}),(0,a.Z)({name:"Credentials",id:"credentials",credentials:{email:{label:"Email",type:"email",placeholder:"test@example.com"},password:{label:"Password",type:"password"}},async authorize(e){let r=e?.email,t=e?.password;c.connect(process.env.MONGO_URL);let n=await i.n.findOne({email:r});return n&&u().compareSync(t,n.password)?n:null}})]}},6590:(e,r,t)=>{t.d(r,{n:()=>i});var n=t(11185);let s=new n.Schema({name:{type:String},email:{type:String,required:!0,unique:!0},password:{type:String},image:{type:String}},{timestamps:!0}),i=n.models?.User||(0,n.model)("User",s)},49636:(e,r,t)=>{t.d(r,{a:()=>i});var n=t(11185);let s=new n.Schema({email:{type:String,required:!0},streetAddress:{type:String},postalCode:{type:String},city:{type:String},country:{type:String},phone:{type:String},admin:{type:Boolean,default:!1}},{timestamps:!0}),i=n.models?.UserInfo||(0,n.model)("UserInfo",s)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[948,51],()=>t(72818));module.exports=n})();