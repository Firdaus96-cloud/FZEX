(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{2891:function(e,t,n){Promise.resolve().then(n.bind(n,3652))},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"redirect")&&n.d(t,{redirect:function(){return s.redirect}}),n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}})},3652:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var s=n(7437),a=n(4551),r=n(2546),l=n(8497),i=n(6463),d=n(2265),u=n(8726);function c(){let{loading:e,data:t}=(0,l.U)(),[n,c]=(0,d.useState)(null),{id:o}=(0,i.useParams)();async function h(e,t){e.preventDefault();let n=new Promise(async(e,n)=>{(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...t,_id:o})})).ok?e():n()});await u.ZP.promise(n,{loading:"Saving user...",success:"User saved",error:"An error has occurred while saving the user"})}return((0,d.useEffect)(()=>{fetch("/api/profile?_id="+o).then(e=>{e.json().then(e=>{c(e)})})},[]),e)?"Loading user profile...":t.admin?(0,s.jsxs)("section",{className:"mt-8 mx-auto max-w-2xl",children:[(0,s.jsx)(r.Z,{isAdmin:!0}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(a.Z,{user:n,onSave:h})})]}):"Not an admin"}},8497:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var s=n(2265);function a(){let[e,t]=(0,s.useState)(!1),[n,a]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{a(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),a(!1)})})},[]),{loading:n,data:e}}},7998:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var s=n(7437);function a(e){let{addressProps:t,setAddressProp:n,disabled:a=!1}=e,{phone:r,streetAddress:l,postalCode:i,city:d,country:u}=t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{children:"Phone"}),(0,s.jsx)("input",{disabled:a,type:"tel",placeholder:"Phone number",value:r||"",onChange:e=>n("phone",e.target.value)}),(0,s.jsx)("label",{children:"Street address"}),(0,s.jsx)("input",{disabled:a,type:"text",placeholder:"Street address",value:l||"",onChange:e=>n("streetAddress",e.target.value)}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"Postal code"}),(0,s.jsx)("input",{disabled:a,type:"text",placeholder:"Postal code",value:i||"",onChange:e=>n("postalCode",e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{children:"City"}),(0,s.jsx)("input",{disabled:a,type:"text",placeholder:"City",value:d||"",onChange:e=>n("city",e.target.value)})]})]}),(0,s.jsx)("label",{children:"Country"}),(0,s.jsx)("input",{disabled:a,type:"text",placeholder:"Country",value:u||"",onChange:e=>n("country",e.target.value)})]})}},1540:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(7437),a=n(6648),r=n(8726);function l(e){let{link:t,setLink:n}=e;async function l(e){let t=e.target.files;if((null==t?void 0:t.length)===1){let e=new FormData;e.set("file",t[0]);let s=fetch("/api/upload",{method:"POST",body:e}).then(e=>{if(e.ok)return e.json().then(e=>{n(e)});throw Error("Something went wrong")});await r.ZP.promise(s,{loading:"Uploading...",success:"Upload complete",error:"Upload error"})}}return(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(a.default,{className:"rounded-lg w-full h-full mb-1",src:t,width:250,height:250,alt:"avatar"}),!t&&(0,s.jsx)("div",{className:"text-center bg-gray-200 p-4 text-gray-500 rounded-lg mb-1",children:"No image"}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"file",className:"hidden",onChange:l}),(0,s.jsx)("span",{className:"block border border-gray-300 rounded-lg p-2 text-center cursor-pointer",children:"Change image"})]})]})}},4551:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var s=n(7437),a=n(7998),r=n(1540),l=n(8497),i=n(2265);function d(e){let{user:t,onSave:n}=e,[d,u]=(0,i.useState)((null==t?void 0:t.name)||""),[c,o]=(0,i.useState)((null==t?void 0:t.image)||""),[h,m]=(0,i.useState)((null==t?void 0:t.phone)||""),[f,p]=(0,i.useState)((null==t?void 0:t.streetAddress)||""),[x,v]=(0,i.useState)((null==t?void 0:t.postalCode)||""),[g,j]=(0,i.useState)((null==t?void 0:t.city)||""),[b,y]=(0,i.useState)((null==t?void 0:t.country)||""),[N,C]=(0,i.useState)((null==t?void 0:t.admin)||!1),{data:P}=(0,l.U)();return(0,s.jsxs)("div",{className:"md:flex gap-4",children:[(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"p-2 rounded-lg relative max-w-[120px]",children:(0,s.jsx)(r.Z,{link:c,setLink:o})})}),(0,s.jsxs)("form",{className:"grow",onSubmit:e=>n(e,{name:d,image:c,phone:h,admin:N,streetAddress:f,city:g,country:b,postalCode:x}),children:[(0,s.jsx)("label",{children:"First and last name"}),(0,s.jsx)("input",{type:"text",placeholder:"First and last name",value:d,onChange:e=>u(e.target.value)}),(0,s.jsx)("label",{children:"Email"}),(0,s.jsx)("input",{type:"email",disabled:!0,value:t.email,placeholder:"email"}),(0,s.jsx)(a.Z,{addressProps:{phone:h,streetAddress:f,postalCode:x,city:g,country:b},setAddressProp:function(e,t){"phone"===e&&m(t),"streetAddress"===e&&p(t),"postalCode"===e&&v(t),"city"===e&&j(t),"country"===e&&y(t)}}),P.admin&&(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"p-2 inline-flex items-center gap-2 mb-2",htmlFor:"adminCb",children:[(0,s.jsx)("input",{id:"adminCb",type:"checkbox",className:"",value:"1",checked:N,onChange:e=>C(e.target.checked)}),(0,s.jsx)("span",{children:"Admin"})]})}),(0,s.jsx)("button",{type:"submit",children:"Save"})]})]})}},2546:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=n(7437),a=n(7138),r=n(6463);function l(e){let{isAdmin:t}=e,n=(0,r.usePathname)();return(0,s.jsxs)("div",{className:"flex mx-auto gap-2 tabs justify-center flex-wrap",children:[(0,s.jsx)(a.default,{className:"/profile"===n?"active":"",href:"/profile",children:"Profile"}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{href:"/categories",className:"/categories"===n?"active":"",children:"Categories"}),(0,s.jsx)(a.default,{href:"/menu-items",className:n.includes("menu-items")?"active":"",children:"Menu Items"}),(0,s.jsx)(a.default,{className:n.includes("/users")?"active":"",href:"/users",children:"Users"})]}),(0,s.jsx)(a.default,{className:"/orders"===n?"active":"",href:"/orders",children:"Orders"})]})}}},function(e){e.O(0,[138,648,726,971,23,744],function(){return e(e.s=2891)}),_N_E=e.O()}]);