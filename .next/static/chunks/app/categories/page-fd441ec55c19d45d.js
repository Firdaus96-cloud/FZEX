(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{3698:function(e,t,n){Promise.resolve().then(n.bind(n,7375))},6463:function(e,t,n){"use strict";var s=n(1169);n.o(s,"redirect")&&n.d(t,{redirect:function(){return s.redirect}}),n.o(s,"useParams")&&n.d(t,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(t,{usePathname:function(){return s.usePathname}})},7375:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(7437),a=n(4514),r=n(2546),i=n(2265),c=n(8497),l=n(8726);function u(){let[e,t]=(0,i.useState)(""),[n,u]=(0,i.useState)([]),{loading:o,data:d}=(0,c.U)(),[m,f]=(0,i.useState)(null);function h(){fetch("/api/categories").then(e=>{e.json().then(e=>{u(e)})})}async function x(n){n.preventDefault();let s=new Promise(async(n,s)=>{let a={name:e};m&&(a._id=m._id);let r=await fetch("/api/categories",{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});t(""),h(),f(null),r.ok?n():s()});await l.ZP.promise(s,{loading:m?"Updating category...":"Creating your new category...",success:m?"Category updated":"Category created",error:"Error, sorry..."})}async function p(e){let t=new Promise(async(t,n)=>{(await fetch("/api/categories?_id="+e,{method:"DELETE"})).ok?t():n()});await l.ZP.promise(t,{loading:"Deleting...",success:"Deleted",error:"Error"}),h()}return((0,i.useEffect)(()=>{h()},[]),o)?"Loading user info...":d.admin?(0,s.jsxs)("section",{className:"mt-8 max-w-2xl mx-auto",children:[(0,s.jsx)(r.Z,{isAdmin:!0}),(0,s.jsx)("form",{className:"mt-8",onSubmit:x,children:(0,s.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,s.jsxs)("div",{className:"grow",children:[(0,s.jsxs)("label",{children:[m?"Update category":"New category name",m&&(0,s.jsxs)(s.Fragment,{children:[": ",(0,s.jsx)("b",{children:m.name})]})]}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{className:"pb-2 flex gap-2",children:[(0,s.jsx)("button",{className:"border border-primary",type:"submit",children:m?"Update":"Create"}),(0,s.jsx)("button",{type:"button",onClick:()=>{f(null),t("")},children:"Cancel"})]})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"mt-8 text-sm text-gray-500",children:"Existing categories"}),(null==n?void 0:n.length)>0&&n.map(e=>(0,s.jsxs)("div",{className:"bg-gray-100 rounded-xl p-2 px-4 flex gap-1 mb-1 items-center",children:[(0,s.jsx)("div",{className:"grow",children:e.name}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{f(e),t(e.name)},children:"Edit"}),(0,s.jsx)(a.Z,{label:"Delete",onDelete:()=>p(e._id)})]})]},e._id))]})]}):"Not an admin"}},4514:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437),a=n(2265);function r(e){let{label:t,onDelete:n}=e,[r,i]=(0,a.useState)(!1);return r?(0,s.jsx)("div",{className:"fixed bg-black/80 inset-0 flex items-center h-full justify-center",children:(0,s.jsxs)("div",{className:"bg-white p-4 rounded-lg",children:[(0,s.jsx)("div",{children:"Are you sure you want to delete?"}),(0,s.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>i(!1),children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{n(),i(!1)},type:"button",className:"primary",children:"Yes,\xa0delete!"})]})]})}):(0,s.jsx)("button",{type:"button",onClick:()=>i(!0),children:t})}},8497:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var s=n(2265);function a(){let[e,t]=(0,s.useState)(!1),[n,a]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{a(!0),fetch("/api/profile").then(e=>{e.json().then(e=>{t(e),a(!1)})})},[]),{loading:n,data:e}}},2546:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7437),a=n(7138),r=n(6463);function i(e){let{isAdmin:t}=e,n=(0,r.usePathname)();return(0,s.jsxs)("div",{className:"flex mx-auto gap-2 tabs justify-center flex-wrap",children:[(0,s.jsx)(a.default,{className:"/profile"===n?"active":"",href:"/profile",children:"Profile"}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.default,{href:"/categories",className:"/categories"===n?"active":"",children:"Categories"}),(0,s.jsx)(a.default,{href:"/menu-items",className:n.includes("menu-items")?"active":"",children:"Menu Items"}),(0,s.jsx)(a.default,{className:n.includes("/users")?"active":"",href:"/users",children:"Users"})]}),(0,s.jsx)(a.default,{className:"/orders"===n?"active":"",href:"/orders",children:"Orders"})]})}}},function(e){e.O(0,[138,726,971,23,744],function(){return e(e.s=3698)}),_N_E=e.O()}]);