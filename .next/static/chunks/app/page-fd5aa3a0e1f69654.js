(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8550:function(e,t,n){Promise.resolve().then(n.t.bind(n,8173,23)),Promise.resolve().then(n.bind(n,3230)),Promise.resolve().then(n.bind(n,9623))},6425:function(e,t,n){"use strict";n.d(t,{A:function(){return a},AppProvider:function(){return o},B:function(){return c}});var s=n(7437),r=n(998),l=n(2265),i=n(8726);let a=(0,l.createContext)({});function c(e){var t;let n=e.basePrice;if(e.size&&(n+=e.size.price),(null===(t=e.extras)||void 0===t?void 0:t.length)>0)for(let t of e.extras)n+=t.price;return n}function o(e){let{children:t}=e,[n,c]=(0,l.useState)([]),o=window.localStorage;function d(e){o&&o.setItem("cart",JSON.stringify(e))}return(0,l.useEffect)(()=>{o&&o.getItem("cart")&&c(JSON.parse(o.getItem("cart")))},[]),(0,s.jsx)(r.SessionProvider,{children:(0,s.jsx)(a.Provider,{value:{cartProducts:n,setCartProducts:c,addToCart:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];c(s=>{let r=[...s,{...e,size:t,extras:n}];return d(r),r})},removeCartProduct:function(e){c(t=>{let n=t.filter((t,n)=>n!==e);return d(n),n}),i.ZP.success("Product removed")},clearCart:function(){c([]),d([])}},children:t})})}},3230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(7437),r=n(6425);function l(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 9h16.5m-16.5 6.75h16.5"})})}function i(e){let{className:t="w-6 h-6"}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t,children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})})}var a=n(998),c=n(7138),o=n(2265);function d(e){let{status:t,userName:n}=e;return"authenticated"===t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(c.default,{href:"/profile",className:"whitespace-nowrap",children:["Hello, ",n]}),(0,s.jsx)("button",{onClick:()=>(0,a.signOut)(),className:"bg-primary rounded-full text-white px-8 py-2",children:"Logout"})]}):"unauthenticated"===t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.default,{href:"/login",children:"Login"}),(0,s.jsx)(c.default,{href:"/register",className:"bg-primary rounded-full text-white px-8 py-2",children:"Register"})]}):void 0}function u(){var e;let t=(0,a.useSession)(),n=null==t?void 0:t.status,u=null===(e=t.data)||void 0===e?void 0:e.user,h=(null==u?void 0:u.name)||(null==u?void 0:u.email),{cartProducts:x}=(0,o.useContext)(r.A),[m,f]=(0,o.useState)(!1);return h&&h.includes(" ")&&(h=h.split(" ")[0]),(0,s.jsxs)("header",{children:[(0,s.jsxs)("div",{className:"flex items-center md:hidden justify-between",children:[(0,s.jsx)(c.default,{className:"text-primary font-semibold text-2xl",href:"/",children:"ST PIZZA"}),(0,s.jsxs)("div",{className:"flex gap-8 items-center",children:[(0,s.jsxs)(c.default,{href:"/cart",className:"relative",children:[(0,s.jsx)(i,{}),(null==x?void 0:x.length)>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-4 bg-primary text-white text-xs py-1 px-1 rounded-full leading-3",children:x.length})]}),(0,s.jsx)("button",{className:"p-1 border",onClick:()=>f(e=>!e),children:(0,s.jsx)(l,{})})]})]}),m&&(0,s.jsxs)("div",{onClick:()=>f(!1),className:"md:hidden p-4 bg-gray-200 rounded-lg mt-2 flex flex-col gap-2 text-center",children:[(0,s.jsx)(c.default,{href:"/",children:"Home"}),(0,s.jsx)(c.default,{href:"/menu",children:"Menu"}),(0,s.jsx)(c.default,{href:"/#about",children:"About"}),(0,s.jsx)(c.default,{href:"/#contact",children:"Contact"}),(0,s.jsx)(d,{status:n,userName:h})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center justify-between",children:[(0,s.jsxs)("nav",{className:"flex items-center gap-8 text-gray-500 font-semibold",children:[(0,s.jsx)(c.default,{className:"text-primary font-semibold text-2xl",href:"/",children:"ST PIZZA"}),(0,s.jsx)(c.default,{href:"/",children:"Home"}),(0,s.jsx)(c.default,{href:"/menu",children:"Menu"}),(0,s.jsx)(c.default,{href:"/#about",children:"About"}),(0,s.jsx)(c.default,{href:"/#contact",children:"Contact"})]}),(0,s.jsxs)("nav",{className:"flex items-center gap-4 text-gray-500 font-semibold",children:[(0,s.jsx)(d,{status:n,userName:h}),(0,s.jsxs)(c.default,{href:"/cart",className:"relative",children:[(0,s.jsx)(i,{}),(null==x?void 0:x.length)>0&&(0,s.jsx)("span",{className:"absolute -top-2 -right-4 bg-primary text-white text-xs py-1 px-1 rounded-full leading-3",children:x.length})]})]})]})]})}},9623:function(e,t,n){"use strict";n.d(t,{default:function(){return c}});var s=n(7437),r=n(2363),l=n(5249),i=n(6648),a=n(2265);function c(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{fetch("/api/menu-items").then(e=>{e.json().then(e=>{t(e.slice(-3))})})},[]),(0,s.jsxs)("section",{className:"",children:[(0,s.jsxs)("div",{className:"absolute left-0 right-0 w-full justify-start",children:[(0,s.jsx)("div",{className:"absolute left-0 -top-[70px] text-left -z-10",children:(0,s.jsx)(i.default,{src:"/sallad1.png",width:109,height:189,alt:"sallad"})}),(0,s.jsx)("div",{className:"absolute -top-[100px] right-0 -z-10",children:(0,s.jsx)(i.default,{src:"/sallad2.png",width:107,height:195,alt:"sallad"})})]}),(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)(r.Z,{subHeader:"check out",mainHeader:"Our Best Sellers"})}),(0,s.jsx)("div",{className:"grid sm:grid-cols-3 gap-4",children:(null==e?void 0:e.length)>0&&e.map(e=>(0,s.jsx)(l.Z,{...e},e._id))})]})}},2363:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437);function r(e){let{subHeader:t,mainHeader:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h3",{className:"uppercase text-gray-500 font-semibold leading-4",children:t}),(0,s.jsx)("h2",{className:"text-primary font-bold text-4xl italic",children:n})]})}},5249:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var s=n(7437),r=n(6425),l=n(2265);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}var a={borderRadius:"4rem",width:"8rem"};function c(e){var t=e.src,n=void 0===t?"":t,s=e.children,r=e.targetTop,c=e.targetLeft,o=e.customAnimation,d=e.animationDuration,u=void 0===d?.9:d,h=e.flyingItemStyling,x=void 0===h?a:h,m=(0,l.useRef)(null);return l.createElement("div",null,l.createElement("style",null,"\n    .flying_image {\n      --target-position-x: 0px;\n      --target-position-y: 0px;\n    \n      display: block;\n      position: fixed;\n      top: var(--target-position-y);\n      left: var(--target-position-x);\n      translate: -50% -50%;\n      animation: fly "+u+"s 1;\n    }\n    @keyframes fly {\n      0% {\n        top: var(--target-position-y);\n        left: var(--target-position-x);\n        opacity: 1;\n      }\n      "+(void 0===o?"":o)+"\n      100% {\n        top: "+(void 0===r?"5%":r)+";\n        left: "+(void 0===c?"5%":c)+";\n        opacity: 0;\n      }\n    }\n  "),l.createElement("button",{onClick:function(e){m.current.style.setProperty("--target-position-x",e.clientX+"px"),m.current.style.setProperty("--target-position-y",e.clientY+"px"),m.current.style.setProperty("display",""),m.current.src=n,setTimeout(function(){return m.current.style.setProperty("display","none")},1e3*u-100)}},s),l.createElement("img",{src:"",alt:"",className:"flying_image",style:i({display:"none"},a,x),ref:m}))}function o(e){let{hasSizesOrExtras:t,onClick:n,basePrice:r,image:l}=e;return t?(0,s.jsx)("button",{type:"button",onClick:n,className:"mt-4 bg-primary text-white rounded-full px-8 py-2",children:(0,s.jsxs)("span",{children:["Add to cart (from $",r,")"]})}):(0,s.jsx)("div",{className:"flying-button-parent mt-4",children:(0,s.jsx)(c,{targetTop:"5%",targetLeft:"95%",src:l,children:(0,s.jsxs)("div",{onClick:n,children:["Add to cart $",r]})})})}function d(e){let{onAddToCart:t,...n}=e,{image:r,description:l,name:i,basePrice:a,sizes:c,extraIngredientPrices:d}=n,u=(null==c?void 0:c.length)>0||(null==d?void 0:d.length)>0;return(0,s.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg text-center group hover:bg-white hover:shadow-md hover:shadow-black/25 transition-all",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("img",{src:r,className:"max-h-auto max-h-24 block mx-auto",alt:"pizza"})}),(0,s.jsx)("h4",{className:"font-semibold text-xl my-3",children:i}),(0,s.jsx)("p",{className:"text-gray-500 text-sm line-clamp-3",children:l}),(0,s.jsx)(o,{image:r,hasSizesOrExtras:u,onClick:t,basePrice:a})]})}var u=n(6648);function h(e){let{image:t,name:n,description:i,basePrice:a,sizes:o,extraIngredientPrices:h}=e,[x,m]=(0,l.useState)((null==o?void 0:o[0])||null),[f,p]=(0,l.useState)([]),[g,j]=(0,l.useState)(!1),{addToCart:v}=(0,l.useContext)(r.A);async function y(){if(console.log("add to cart"),(o.length>0||h.length>0)&&!g){j(!0);return}v(e,x,f),await new Promise(e=>setTimeout(e,1e3)),console.log("hiding popup"),j(!1)}let b=a;if(x&&(b+=x.price),(null==f?void 0:f.length)>0)for(let e of f)b+=e.price;return(0,s.jsxs)(s.Fragment,{children:[g&&(0,s.jsx)("div",{onClick:()=>j(!1),className:"fixed inset-0 bg-black/80 flex items-center justify-center",children:(0,s.jsx)("div",{onClick:e=>e.stopPropagation(),className:"my-8 bg-white p-2 rounded-lg max-w-md",children:(0,s.jsxs)("div",{className:"overflow-y-scroll p-2",style:{maxHeight:"calc(100vh - 100px)"},children:[(0,s.jsx)(u.default,{src:t,alt:n,width:300,height:200,className:"mx-auto"}),(0,s.jsx)("h2",{className:"text-lg font-bold text-center mb-2",children:n}),(0,s.jsx)("p",{className:"text-center text-gray-500 text-sm mb-2",children:i}),(null==o?void 0:o.length)>0&&(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("h3",{className:"text-center text-gray-700",children:"Pick your size"}),o.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-4 border rounded-md mb-1",children:[(0,s.jsx)("input",{type:"radio",onChange:()=>m(e),checked:(null==x?void 0:x.name)===e.name,name:"size"}),e.name," $",a+e.price]},e._id))]}),(null==h?void 0:h.length)>0&&(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)("h3",{className:"text-center text-gray-700",children:"Any extras?"}),h.map(e=>(0,s.jsxs)("label",{className:"flex items-center gap-2 p-4 border rounded-md mb-1",children:[(0,s.jsx)("input",{type:"checkbox",onChange:t=>{t.target.checked?p(t=>[...t,e]):p(t=>t.filter(t=>t.name!==e.name))},checked:f.map(e=>e._id).includes(e._id),name:e.name}),e.name," +$",e.price]},e._id))]}),(0,s.jsx)(c,{targetTop:"5%",targetLeft:"95%",src:t,children:(0,s.jsxs)("div",{className:"primary sticky bottom-2",onClick:y,children:["Add to cart $",b]})}),(0,s.jsx)("button",{className:"mt-2",onClick:()=>j(!1),children:"Cancel"})]})})}),(0,s.jsx)(d,{onAddToCart:y,...e})]})}n(8726)}},function(e){e.O(0,[138,648,726,998,971,23,744],function(){return e(e.s=8550)}),_N_E=e.O()}]);